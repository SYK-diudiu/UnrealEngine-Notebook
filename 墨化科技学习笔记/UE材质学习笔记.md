# 材质基础

## 材质基础（一）

### 向量的区别

#### 1-4元向量含义和创建

1. 一元向量：

   在材质球蓝图中，按住键盘上的1加鼠标左键即可创建。指单独的X或Y或Z。

2. 二元向量： 

   在材质球蓝图中，按住键盘上的1加鼠标左键即可创建。

   二元向量是由坐标轴上面的一对数构成的，代表着横轴和纵轴的信息，在UE中也可以代表颜色的RG，空间的XY。

3. 三元向量：

   在材质球蓝图中，按住键盘上的1加鼠标左键即可创建。

   三元向量是在XY基础上添加了一个纵轴，也就是Z轴，在UE中常用于表现RGB以及XYZ的坐标信息。

4. 四元向量：

   在材质球蓝图中，按住键盘上的1加鼠标左键即可创建。

   在XYZ的基础上增加了一个空间中一个可以任意调控的值，例如Alpha之类的

#### 常量和参数的区别

​	上面我们按住键盘上数字创建的向量均属于常量。

<img src="UE材质学习笔记.assets/image-20250301120414957.png" alt="image-20250301120414957" style="zoom: 67%;" />

​	而参数则需要我们对其进行转化，比如现在随便选择一个常量，鼠标右键单击选择下图所示选项。

![image-20250301120534843](UE材质学习笔记.assets/image-20250301120534843.png)

​	之后即可将其转换为参数，从材质球的节点中拖动出来创建的节点也属于参数。

​	常量和参数的区别就是：常量不会在材质球实例（即：子材质球）中出现，因此它不能在子球中进行修改；而参数则会继承到子材质球上，我们可以在子球中通过对参数的修改而改变子球的属性。

​	更明显的一个区别是，是参数的节点，其名称下往往有`Param`（Parameter)标志，而常量节点没有。

![image-20250301121055209](UE材质学习笔记.assets/image-20250301121055209.png)

![image-20250301121122539](UE材质学习笔记.assets/image-20250301121122539.png)

​	可以看到上图中两个节点一个是常量一个是参数，现在我们创建材质球实例，观察常量和参数是否可以在实例中设置。

![image-20250301121259368](UE材质学习笔记.assets/image-20250301121259368.png)

​	可以看到只有参数节点可以在子材质球中进行设置。

### PBR材质节点

![image-20250713111359639](UE材质学习笔记.assets/image-20250713111359639.png)

- Base Color — 基本颜色

  指物体的基本颜色，不包含任何的照明或者阴影，所以基本颜色的纹理看起来非常平坦

- Specular — 镜面

  用来控制高光的强度与范围的，我们可以通过它设置部分区域的反光

- Roughness — 粗糙度

  就是我们平时所说的平滑与粗糙，贴图白色部分代表粗糙度比较高的区域，黑色部分代表粗糙度比较低的区域

- Metallicity — 金属度

  生活中没有既金属右不是金属的半金属的物体，金属贴图也是非黑即白，没有灰色的贴图，当金属度为1时，漫射颜色也就看不见了，物体颜色就由金属颜色决定

- Normal — 法线

  可以帮我们把低模的物体，变成类似高模的物体（但是法线的原理是通过改变光的折射形成的假细节，真细节只有置换，但是UE5的法线已经近似于置换了）



### 什么是UV

三维模型通常是由点、线、面组成的虚构物体，如果想要在物体的表面绘制图案，那就需要用到纹理贴图

纹理的坐标通常分为U和V两个坐标，因此称为UV坐标

### 展UV

将一个立方体沿着边线切割展开

![img](UE材质学习笔记.assets/1651055671291-f5328dac-c6fd-485c-bb50-11f775ab5534.png)

就获得了这个立方体的UV

![img](UE材质学习笔记.assets/1651055689659-431027af-70ae-416f-b418-e9fa865895e3.png)

然后将我们所需要的图片贴在UV上

![img](UE材质学习笔记.assets/1651055728819-8a28c84c-9c8f-4872-b47e-0bee07724e97.png)

然后再把立方体拼回来

![img](UE材质学习笔记.assets/1651055745290-001c4564-296b-48f7-afcf-e2fb64918e6e.png)

这个过程就叫展UV

![img](UE材质学习笔记.assets/1651055767518-cfb65bdb-7f27-46f2-8de8-499c30cb463d.png)

### UV提取

01.添加Texture Coordinate节点连接到贴图

![img](UE材质学习笔记.assets/1651135697441-b957983f-bbe2-4f83-8175-39b27ee16b58.png)

02.再次添加Component Mask — 组件掩码  节点

![img](UE材质学习笔记.assets/1651135808438-9387bcf6-4493-4a5f-a107-baad59a6fb98.png)

关闭Component Mask中的 G 选项

![img](UE材质学习笔记.assets/1651135872020-11c0b098-98fb-4763-8f33-b0947709f015.png)

03.添加Multiply — 相乘  节点

![img](UE材质学习笔记.assets/1651135996635-0c07018b-1a6e-4f3b-a477-6a5b0acb1985.png)

然后将Component Mask节点和一元向量使用相乘连接起来

![img](UE材质学习笔记.assets/1651136064553-b9f566c7-c051-4e07-969e-a70ca67e303d.png)

04.将一元向量U信息调整成1

![img](UE材质学习笔记.assets/1651136156743-1d25e45b-43cb-44f7-b0e3-e20aa6ac6025.png)

05.然后使用同样方法提取V信息

![img](UE材质学习笔记.assets/1651136224175-a5298eed-026c-498d-8c61-295c74b197ae.png)

使用的是Make Floath2节点  将U和V信息连接起来

![img](UE材质学习笔记.assets/1651136393966-b0a01937-8671-4cad-b279-d098f9660fd7.png)

06.使用Add — 相加节点 和一元向量提取U的偏移

![img](UE材质学习笔记.assets/1651136577636-c3fcbb34-9c04-4b4d-b370-9a4b7bc798e5.png)

07.再使用Add — 相加节点 和一元向量提取V的偏移

![img](UE材质学习笔记.assets/1651136672692-8fec7351-6bc9-46aa-9269-3c6b01b4f79d.png)

### 参数分组

选中U的信息，在Group中新建一个U的控制 —— U CONTROL 

![img](UE材质学习笔记.assets/1651137150710-3803b6fc-45c7-4566-b5f7-8647d269d8a9.png)

再将U的偏移也分到U CONTROL 

![img](UE材质学习笔记.assets/1651137217833-f9421611-c252-4a6a-b168-41242c64e0e7.png)

V的信息也是同样分组

## 材质基础（二）

### 材质属性参数

#### Base Color 基础颜色

![img](UE材质学习笔记.assets/1721616878747-01370631-9eb0-44a6-9c6e-9d1230685475.png)

#### Metallic 金属度

![img](UE材质学习笔记.assets/1721616926687-b1e765f3-c051-4de5-93ee-cdb4eec04a3d.png)

#### Specular 反射

![img](UE材质学习笔记.assets/1721616982586-0a6b15ed-017c-4b54-9495-2c5157d0b564.png)

#### Roughness 粗糙度

![img](UE材质学习笔记.assets/1721617120149-0b24061a-4dc9-4260-8c53-39ef407a37b0.png)

#### Emissive Color 发光颜色

![img](UE材质学习笔记.assets/1721619453421-161d3486-4774-4eb0-b610-98bb3e96a940.png)

#### World Position Offset 世界位置偏移

![image-20250713111752201](UE材质学习笔记.assets/image-20250713111752201.png)

给该引脚传递三维参数可以改变材质在视觉上的位置，为什么说是视觉上的位置，因为视觉是会欺骗人的，使用该材质的物体本身的位置并没有改变，只是材质的表现让我们认为它改变了。

下面举例演示该引脚的作用。

![image-20250713113308512](UE材质学习笔记.assets/image-20250713113308512.png)

![image-20250713112513582](UE材质学习笔记.assets/image-20250713112513582.png)

新建一个材质，我们使用一张图片（不用在意图片中的内容）作为`BaseColor`可以看到材质球的样子已经发生了变化，之后我们使用一个三元参数并将其R、G、B三个数字合并为一个三维向量传入`World Position Offset`引脚，三元参数的初始值均为0。

在世界场景中拖入一些物体进行测试，见下图。

![image-20250713113006515](UE材质学习笔记.assets/image-20250713113006515.png)

可以看到我使用了一个球体和一个正方体，其中球体使用简单的白色材质，它将作为参照物方便我们观察右侧正方体材质在视觉上的位置变化。正方体使用刚刚新建的材质，**注意正方体位置是否发生了变化**。

下面我会尝试改变三元参数中的各个数值。

![image-20250713113849476](UE材质学习笔记.assets/image-20250713113849476.png)

可以看到我改变了三元参数中的`B`对应的值为100，也就是`XYZ`中的`Z`，可以看出正方体在视觉上向`Z`轴正方向移动了100厘米。

但是仔细观察就会发现，代表正方体坐标的那个点并没有变化，始终在球体的右边，如果此时撤销正方体使用的材质，就会发现正方体并没有发生移动，如下图所示。

![image-20250713114150725](UE材质学习笔记.assets/image-20250713114150725.png)

材质的`B`数值仍然是100，当正方体刚才使用的材质被撤销之后就可以看到其实它并没有移动，只是使用的材质带给我们了视觉上的变化而已。

**旗帜飘动效果**

![img](UE材质学习笔记.assets/1721620187712-11cf8edb-942a-452e-9008-6aaad14d315c.png)

通过虚幻内置的一些材质函数或自定义材质函数（比如：“Grass Wind”），连接到此引脚可以实现类似旗帜飘动的效果，因为该引脚接收的每个数值都会改变被赋予材质的物体的形状，那么一连串的数值的改变，就可以组成一个飘动的画面，这就是它的工作原理。

### Material Domain（材质领域）

#### Light Function 灯光函数

材质蓝图的细节面板中，在`Material Domain`选项卡里面可以找到`Light Function`（灯光函数）选项，该选项主要为灯光效果服务，为灯光制作不同效果的材质是使用。

![image-20250713161807202](UE材质学习笔记.assets/image-20250713161807202.png)

比如说在下图所示的场景中只有一个聚光源照射在地面上，它只有很普通的圆形光。

![image-20250713163007292](UE材质学习笔记.assets/image-20250713163007292.png)

为了丰富普通的灯光效果，我们就可以为其添加`Light Function`，在灯光的细节面板中就有添加`Light Function`的选项，如下图所示。

![image-20250713162449128](UE材质学习笔记.assets/image-20250713162449128.png)

现在可以简单制作一个`Light Function`并将它运用到图中的聚光源上，看看光射出的效果是怎样的。

![image-20250713163157914](UE材质学习笔记.assets/image-20250713163157914.png)

我将一张黑白图片连接到了`Light Function`模式下唯一暴露的引脚`Emissive Color`上，之后我把该材质应用到了灯光的对应选项中。

![image-20250713163326456](UE材质学习笔记.assets/image-20250713163326456.png)

最后的到了下图所示的灯光效果。

![image-20250713163349556](UE材质学习笔记.assets/image-20250713163349556.png)

这就是`Light Function`模式下材质的使用方式，关于传递给`Emissive Color`引脚的图片可以不是黑白的，但是不论传递的图片是什么颜色，只要灯光颜色是白色，那么最终颜色就是黑白色，因为决定光颜色的部分在光的细节面板里，不取决于这里材质里使用的图片的颜色，如果想改变最终打出的光亮的颜色，那就改变光细节面板中的颜色即可。

### Blend Mode（材质混合模式类型）

#### Masked 已遮罩

![img](UE材质学习笔记.assets/1721620488140-a7a952c0-9398-43d5-aa08-825a82568218.png)

![img](UE材质学习笔记.assets/1721620654352-6a6c3597-a9f7-43ca-9f81-02ca2edbb298.png)

​	对于当前模式，只有透明和不透明之分，没有半透明的说法，起到关键作用的引脚就是那个`Opacity Mask`（中文：不透明蒙版），把黑白图片传入该引脚，图片中偏黑色的地方会变得完全透明，而偏白色的地方会变得完全不透明，具体是以0.34为分界线，大于0.34不透明，小于0.34透明，一刀切没有过渡，需要过度的话可以使用下面的`Translucent`。

​	注意与下面的`Translucent` 对比。

#### Translucent 半透明

![img](UE材质学习笔记.assets/1721620705305-aa9805e2-645a-4d8c-bd52-2e9ce70b2179.png)

![img](UE材质学习笔记.assets/1721620730619-1c605e36-1868-45f8-aecd-c2eb87f14ef0.png)

​	对于该模式，我们有透明、半透明、不透明之分，从黑到白，这个过程中，我们的材质会随之变得越来越不透明，因此可以看到图中的材质表现是从完全透明到半透明最后再到不透明的过渡。

##### Additive 添加

![img](UE材质学习笔记.assets/1721620800898-c1d5eae8-3c07-470f-a00d-d45fc7255490.png)

![img](UE材质学习笔记.assets/1721621514972-45ca5df3-8bd5-4d40-995d-9c77347041a3.png)

启用了叠加选项之后，两个半透明材质通过叠加的方向看过去会有一定的增强效果，看起来更亮了。

##### Surface ForwardShading 表面向前着色

制作玻璃等类似材质时，往往会选择`Translucent`混合模式，但是这种混合模式在默认情况下会缺少很多可以调整的引脚，如下图所示。

![image-20250713120652001](UE材质学习笔记.assets/image-20250713120652001.png)

![image-20250713120731133](UE材质学习笔记.assets/image-20250713120731133.png)

但是有时候我们又需要调整其中被隐藏的一些引脚来调整材质，这是即可找到`Surface ForwardShading`选项，在细节面板中搜索`Translucency`之后找到`Lightning Mode`选项卡即可找到该选项。

![image-20250713121027377](UE材质学习笔记.assets/image-20250713121027377.png)

选择之后即可看到PBR材质节点中很多不可用的节点就回来了，如下图所示。

![image-20250713121244390](UE材质学习笔记.assets/image-20250713121244390.png)

这是目前已知的最好的解决方案。

##### 开启折射

在半透明模式制作玻璃、水等材质时需要赋予材质一定的折射率，这样才能更加拟真，但是默认情况下设置折射率（Refraction)的引脚是不启用的，如下图所示。

![屏幕截图 2025-07-13 170727](UE材质学习笔记.assets/屏幕截图 2025-07-13 170727.png)

因此我们需要在细节面板中找到对应的选项卡，如下图所示。

![image-20250713170942251](UE材质学习笔记.assets/image-20250713170942251.png)

选择第一个`Index of Refraction`（虚幻引擎的中文翻译就是：折射率）即可。

![image-20250713171101812](UE材质学习笔记.assets/image-20250713171101812.png)

# 常用功能节点总结

## Constants类

### Time

![image-20250713214259964](UE材质学习笔记.assets/image-20250713214259964.png)

该节点会随时间流逝稳定输出持续增大的数字，**可以使用这一特性来实现材质动态效果的速度控制**。

![image-20250713215125475](UE材质学习笔记.assets/image-20250713215125475.png)

材质蓝图中使用了`DebugScalarValues`节点并连接`BaseColor`引脚，材质会展示不断变化的`Time`节点传出的数字，如下图所示。

![image-20250713215320836](UE材质学习笔记.assets/image-20250713215320836.png)

![image-20250713215334810](UE材质学习笔记.assets/image-20250713215334810.png)

## Coordinates类

### WorldPosition

### CameraPositionWS

### Panner

![image-20250713215923034](UE材质学习笔记.assets/image-20250713215923034.png)

- **Coordinate**：多用于接收`UV`坐标，可以在传递过来的`UV`基础上进行平移操作。

- **Time**：就是`Time`函数在发挥作用，可以连接由`Time`函数发出的值来控制速度，如下图所示。

  ![image-20250713220812658](UE材质学习笔记.assets/image-20250713220812658.png)

  使用`Time`节点再乘一个数字即可控制其时间流速，将修改过的时间流速传递给`Panner`节点即可控制`Panner`对`UV`坐标的修改速度，从而改变`BaseColor`展现的图片的动态效果速度。

  ![image-20250713221018650](UE材质学习笔记.assets/image-20250713221018650.png)

  上图是1倍速下的截图。

  ![image-20250713221105786](UE材质学习笔记.assets/image-20250713221105786.png)

  上图是0.1倍速下的截图，从图案的模糊程度可以看出0.1倍速确实放慢了不少。

- **Speed**：这两个数字的数值就是单位时间修改`UV`的数量，`X`修改`U`，`Y`修改`V`。

### VertexNormalWS（顶点法线）

![image-20250713181218128](UE材质学习笔记.assets/image-20250713181218128.png)

在制作汽车玻璃等要求边缘折射较大，中心折射较小的材质时，除了使用`Fresnel`菲涅尔插值折射率之外还可以使用该节点达到类似的效果。

下图是使用`Fresnel`菲涅尔制造汽车玻璃折射效果，材质使用的其它节点省略。

![image-20250713181753847](UE材质学习笔记.assets/image-20250713181753847.png)

使用`VertexNormalWS`节点，直接链接折射率引脚，得到的折射效果时是反的，可以通过`OneMinus`数学节点来实现反向变化，如下图所示。

![image-20250713182029910](UE材质学习笔记.assets/image-20250713182029910.png)

## Texture类

### TextureSample



## Math类

### Add

![image-20250714122151508](UE材质学习笔记.assets/image-20250714122151508.png)

可以实现简单的两个同类型数据的相加操作，基础的数据相加不再展示。

当我们**需要将多个材质效果合并输出时也需要使用到`Add`节点**，如下图所示。

![image-20250714121855852](UE材质学习笔记.assets/image-20250714121855852.png)

![image-20250714121802878](UE材质学习笔记.assets/image-20250714121802878.png)

![image-20250714121916909](UE材质学习笔记.assets/image-20250714121916909.png)

在使用`Additive`材质混合模式+无光照的情况下通过使用`Add`节点将边缘菲涅尔控制的蓝色发光效果与中心红色发光效果合并在了一起，最终输出到材质球上，这就是`Add`在效果合并时的作用，可以据此举一反三。

### AppendVector

### Multiply

### Divide

### Clamp

![image-20250713221423618](UE材质学习笔记.assets/image-20250713221423618.png)

很简单的节点，就是传入的数值将会被该节点所控制。

- 传入值<Min：输出Min
- 传入值>Max：输出Max
- Min<传入值<Max：输出转入值。

其中Min和Max的大小是可以改变的，也就是说可以自己定义需要控制的数值范围。

### Normalize

### OneMinus

![image-20250713221755889](UE材质学习笔记.assets/image-20250713221755889.png)

该节点多用于反转纹理贴图的黑白色。

比如制作半透明材质，见下图。

![image-20250713222344391](UE材质学习笔记.assets/image-20250713222344391.png)

当使用这种黑白图片时，材质的效果是这样的：

![image-20250713222632405](UE材质学习笔记.assets/image-20250713222632405.png)

即只有小部分区域是不透明的，而使用`OneMinus`节点之后，见下图。

![image-20250713222657383](UE材质学习笔记.assets/image-20250713222657383.png)

![image-20250713222447550](UE材质学习笔记.assets/image-20250713222447550.png)

也就是说黑白图片中黑的变成了白的，白的变成了黑的，`OneMinus`就是这样用于反转图片或者数据的效果。

## Misc类

### FlattenNormal

![image-20250714141424945](UE材质学习笔记.assets/image-20250714141424945.png)

上图中两个`FlattenNormal`节点相同。

- **Normal**：接收一个法线贴图

- **Flatness**：平整度，可以简单理解为调整法线强度的数值。

  `Flatness=1`时，法线贴图失效，即材质表现其本身的图案；

  `0<Flatness<1`时，法线贴图表现出正常效果，越靠近0，效果越明显。

  `Flatness>1`时，法线贴图表现出的效果相反，即原本凸->凹，原本凹->凸。

- **Result**：仍然当作法线贴图得输出引脚即可，该节点就是调整一下法线贴图的效果强度。

下面举例展示一下效果。

![image-20250714142355472](UE材质学习笔记.assets/image-20250714142355472.png)

注意材质蓝图中的“法线强度”参数的数值变化。

![image-20250714142535003](UE材质学习笔记.assets/image-20250714142535003.png)

上图法线强度为0。

![image-20250714142552006](UE材质学习笔记.assets/image-20250714142552006.png)

上图法线强度为1。

![image-20250714142621612](UE材质学习笔记.assets/image-20250714142621612.png)

上图法线强度为2。

## Utility类

### Fresnel（菲涅尔）

![image-20250713182109485](UE材质学习笔记.assets/image-20250713182109485.png)

- **Exponentln**：衰减程度，数值越大，边缘白色向中心黑色衰减越快，直观来说就是材质球黑色部分变大。
- **BaseReflectFractionln**：可以简单理解为黑白对比度，数值越大，中心黑色部分就越偏白，也就是黑白对比度降低。
- **Normal**：接收一个法线贴图，将菲涅尔效果作用到法线贴图中之后再输出出去

菲涅尔效应是一种光学现象，描述光在两种不同介质（如空气和玻璃、水和空气）的界面上，反射光强度随入射角变化的规律。

简单来说，当光线垂直或接近垂直入射到界面时，反射较弱、折射较强（比如正对着玻璃看，反射光少，能清晰看到玻璃另一侧）；而当光线以大角度斜入射时，反射会明显增强、折射减弱（比如斜着看水面，会看到更明显的反射倒影）。

![image-20250713182515367](UE材质学习笔记.assets/image-20250713182515367.png)

该节点旨在模拟这种效应带来的明暗变化，鼠标右键该节点开启预览即可看到下图所示材质。

![image-20250713182539096](UE材质学习笔记.assets/image-20250713182539096.png)

可以看到材质球中间为黑色，边缘为白色。这就是该节点模拟的菲涅尔效果，折射弱的地方用黑色表示，折射强得地方用白色表示，而在材质制作中黑代表0，白代表1，因此该节点所表现出的效果也可以看作一个遮罩。有时也可以利用遮罩做一些与折射无关的功能，比如颜色范围的界定等。

`Fresnel`节点常用在折射效果的制作中，如下图所示。

![屏幕截图 2025-07-13 181749](UE材质学习笔记.assets/屏幕截图 2025-07-13 181749.png)

利用菲涅尔效果中的0和1的过渡，将其作为`Alpha`值传递给`Lerp`节点，即可实现`AB`两个数值的过渡。也就是材质靠近中心位置处的`Fresnel`是黑色即0，0对应`A`处的折射率，材质靠近边缘位置处的`Fresnel`是白色即1，1对应`B`处的折射率，二者中间部分由`Lerp`负责调控，调控混合后的折射率数值传递给`Refraction`引脚以输出到最终材质效果上。

![image-20250713184117392](UE材质学习笔记.assets/image-20250713184117392.png)

从这张图可以较为清晰的看到透明球的边缘折射率明显高于画面中间部分。